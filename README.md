# YOLO目标检测GUI界面

这是一个基于tkinter的YOLO目标检测图形用户界面，提供了友好的可视化操作界面，支持单张图片检测、批量图片检测和视频流检测。

## 功能特性

- **单张图片检测**: 选择单张图片进行目标检测
- **批量图片检测**: 选择文件夹批量处理多张图片
- **视频流检测**: 支持网络视频流实时检测
- **参数调节**: 可调节置信度阈值和IOU阈值
- **实时日志**: 显示处理过程和结果信息
- **结果可视化**: 在界面中直接显示检测结果

## 安装依赖

### 安装本体依赖
#### 使用pip安装

```bash
pip install -r requirements_gui.txt
```
- requirements_gui.txt中设定的torch库是cpu版本，如果需要安装cuda版本可以访问PyTorch官网查看安装方法和对应版本

### 克隆yolov5库
```bash
git clone https://github.com/ultralytics/yolov5
```

克隆后应当先安装yolov5的依赖
```bash
cd yolov5
pip install -r "requirements.txt"
```

## 使用方法

### 1. 启动GUI界面

```bash
python yolo_gui.py
```

### 2. 配置模型

1. 点击"浏览"按钮选择YOLO模型文件（.pt格式）
2. 调节置信度阈值和IOU阈值（可选）
3. 点击"加载模型"按钮
4. 第一次加载模型可能会比较慢，`__pycache__`文件创建后就会快很多

### 3. 进行检测

#### 单张图片检测
1. 点击"选择单张图片"选择要检测的图片
2. 点击"检测当前图片"开始检测
3. 检测结果将显示在界面中，并保存到输出目录

#### 批量图片检测
1. 点击"选择图片文件夹"选择包含图片的文件夹
2. 点击"批量检测"开始处理
3. 处理进度将在日志区域显示

#### 视频流检测
1. 在"视频流URL"输入框中输入视频流地址
2. 点击"开始视频流检测"开始处理
3. 处理的帧将保存为单独的图片文件

### 4. 查看结果

- 检测结果默认保存在`./output`目录中
- 可以通过"浏览"按钮修改输出目录
- 处理过程和结果信息会在右侧日志区域显示

### 5. 打包为EXE文件
```cmd
pip install PyInstaller
```

- 安装PyInstaller后可以在Console中输入
```cmd
python build_exe.py
```

来将脚本打包成exe文件
- 打包后要将目录中的icon.ico图标手动拖进脚本打包目录中

## 界面说明

### 模型配置区域
- **模型路径**: 选择YOLO模型文件路径
- **置信度阈值**: 控制检测的置信度门槛（0.1-1.0）
- **IOU阈值**: 控制非极大值抑制的阈值（0.1-1.0）

### 检测控制区域
- **单张图片检测**: 选择和检测单张图片
- **批量检测**: 批量处理文件夹中的图片
- **视频流检测**: 处理网络视频流
- **输出目录**: 设置检测结果保存路径

### 显示区域
- **图像显示**: 显示当前选择的图片和检测结果
- **运行日志**: 显示程序运行状态和处理信息

### 状态栏
- 显示当前程序状态（就绪、加载中、检测中等）

## 支持的文件格式

### 图片格式
- JPG/JPEG
- PNG
- BMP
- TIFF/TIF

### 模型格式
- PyTorch模型文件（.pt）

### 视频流URL格式
- 应当为对应摄像头的RTSP推流地址，详情可搜索各大品牌的RTSP地址
- 默认填入的是大华摄像头的RTSP推流地址
- 注意网络连接和本机IP

## 注意事项

1. **模型文件**: 确保使用的是YOLOv5格式的模型文件
2. **内存使用**: 批量处理大量图片时注意内存使用情况
3. **视频流**: 网络视频流检测需要稳定的网络连接
4. **输出目录**: 确保输出目录有写入权限
5. **线程安全**: GUI使用多线程处理，避免在处理过程中重复点击按钮

## 故障排除

### 常见问题

1. **模型加载失败**
   - 检查模型文件路径是否正确
   - 确认模型文件是YOLOv5格式
   - 检查PyTorch版本兼容性

2. **图片显示异常**
   - 确认Pillow库已正确安装
   - 检查图片文件是否损坏

3. **检测结果异常**
   - 调整置信度阈值
   - 检查模型是否适合当前检测任务

4. **界面卡顿**
   - 检测过程在后台线程运行，请耐心等待
   - 避免同时进行多个检测任务

## 技术架构

- **GUI框架**: tkinter（Python内置）
- **图像处理**: Pillow (PIL)
- **深度学习**: PyTorch + YOLOv5
- **计算机视觉**: OpenCV
- **多线程**: threading模块

## 扩展功能

留待实现：
- 实时摄像头检测
- 检测结果统计分析
- 自定义检测类别
- 结果导出为不同格式
- 模型性能监控

## 许可证

本项目遵循YOLOv5的许可证条款
